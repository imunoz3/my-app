{"version":3,"sources":["Mapa.js","FlightInfo.js","ChatInput.js","Chat.js","Main.js","index.js"],"names":["limeOptions","color","Mapa","L","Icon","iconUrl","iconRetinaUrl","iconAnchor","Point","popupAnchor","shadowUrl","shadowSize","shadowAnchor","iconSize","className","state","flights","positions","ws","io","path","this","on","data","setState","emit","response","emitFlights","MapContainer","center","zoom","TileLayer","url","attribution","map","flight","Marker","position","origin","destination","Polyline","pathOptions","plane","CircleMarker","Popup","code","Component","FlightInfo","onClick","airline","seats","passengers","passenger","name","age","ChatInput","message","action","onSubmit","e","preventDefault","props","onSubmitMessage","type","placeholder","value","onChange","target","Chat","chat","submitMessage","messageString","date","Date","toLocaleDateString","idx","style","htmlFor","id","renderChat","Main","exact","to","component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.5ba40c09.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport { MapContainer, TileLayer, Marker, Popup, Polyline, CircleMarker} from 'react-leaflet'\nimport PropTypes from 'prop-types'\nimport L, { Circle } from 'leaflet';\n\nimport io from \"socket.io-client\";\nconst limeOptions = { color: 'lime' }\nconst duckIcon = new L.Icon({\n  iconUrl: 'https://i.ya-webdesign.com/images/sample-png-image-download-3.png',\n  iconRetinaUrl: 'https://i.ya-webdesign.com/images/sample-png-image-download-3.png',\n  iconAnchor: new L.Point(0, 0),\n  popupAnchor: new L.Point(16, 0),\n  shadowUrl: null,\n  shadowSize: null,\n  shadowAnchor: null,\n  iconSize: new L.Point(32, 32),\n  className: 'leaflet-div-icon'\n});\n\nclass Mapa extends Component {\n  state = {\n    flights: [],\n    positions:[]\n  }\n\n  ws = io('wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl', {path: \"/flights\"});\n\n  componentDidMount() {\n    this.ws.on(\"FLIGHTS\", (data) => {\n      this.setState({\n        flights: data\n      });\n    });\n\n    this.ws.on(\"POSITION\", (data) => {\n      //const elementsIndex = this.state.positions.findIndex(element => element.code == data.code )\n      //if (elementsIndex == -1)\n      //{\n      this.setState({\n        positions: [...this.state.positions, data]\n        });\n      //}\n      //else\n      //{\n      //let newArray = [...this.state.positions]\n        //newArray[elementsIndex] = {...newArray[elementsIndex], position: data.position}\n        //this.setState({\n          //positions: newArray,\n          //});\n      //}\n    });\n  }\n\n  emitFlights () {\n    this.ws.emit(\"FLIGHTS\", {})\n  }\n\n  render() {\n    const {response} = this.state;\n    return (\n    <div>\n      {this.emitFlights()}\n      <div>\n        <MapContainer center={[45.4, -75.7]} zoom={1.5}>\n        <TileLayer\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n          attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n        />\n      {this.state.flights.map(flight => (\n        <div>\n        <Marker position={[flight.origin[0], flight.origin[1]]}> \n        </Marker>\n        <Marker position={[flight.destination[0], flight.destination[1]]}> \n        </Marker>\n        <Polyline pathOptions={limeOptions} positions={[[flight.origin[0], flight.origin[1]], [flight.destination[0], flight.destination[1]]]} />\n        </div>\n      ))}\n      {this.state.positions.map(plane => (\n        <div>\n        <CircleMarker center={[plane.position[0], plane.position[1]]}> \n        <Popup>Avión:{plane.code}</Popup>\n        </CircleMarker>\n        </div>\n      ))}\n\n        </MapContainer>\n      </div>\n    </div>\n    );\n  }\n}\n \nexport default Mapa;","import React, { Component } from \"react\";\nimport { MapContainer, TileLayer, Marker, Popup, Polyline, l} from 'react-leaflet'\nimport { Icon } from \"leaflet\";\nimport PropTypes from 'prop-types'\n\n\nimport io from \"socket.io-client\";\nconst limeOptions = { color: 'lime' }\n\nclass FlightInfo extends Component {\n  state = {\n    flights: []\n  }\n\n  ws = io('wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl', {path: \"/flights\"});\n\n  componentDidMount() {\n    this.ws.on(\"FLIGHTS\", (data) => {\n      this.setState({\n        flights: data\n      });\n    });\n  }\n\n  emitFlights () {\n    // on submitting the ChatInput form, send the message, add it to the list and reset the input\n    this.ws.emit(\"FLIGHTS\", {})\n  }\n\n  render() {\n    const {response} = this.state;\n    return (\n    <div>\n      <button onClick={() => this.emitFlights()}> Show Flights </button>\n      <div>\n      {this.state.flights.map(flight => (\n        <p>\n          Vuelo: {flight.code} \n          <div>\n            Aerolínea: {flight.airline} \n          </div>\n          <div>\n            Avión: {flight.plane} \n          </div>\n          <div>\n            Origen: {flight.origin} \n          </div>\n          <div>\n            Destino: {flight.destination} \n          </div>\n          <div>\n            Asientos: {flight.seats} \n          </div>\n          <div>\n            Pasajeros: \n            {\n              flight.passengers.map(passenger => (\n                <div>\n                 {passenger.name}, {passenger.age}\n                </div>\n              ))\n            } \n          </div>\n        </p>\n      ))}\n      </div>\n    </div>\n    );\n  }\n}\n \nexport default FlightInfo;","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\n\nclass ChatInput extends Component {\n  static propTypes = {\n    onSubmitMessage: PropTypes.func.isRequired,\n  }\n  state = {\n    message: '',\n  }\n\n  render() {\n    return (\n      <form\n        action=\".\"\n        onSubmit={e => {\n          e.preventDefault()\n          this.props.onSubmitMessage(this.state.message)\n          this.setState({ message: '' })\n        }}\n      >\n        <input\n          type=\"text\"\n          placeholder={'Enter message...'}\n          value={this.state.message}\n          onChange={e => this.setState({ message: e.target.value })}\n        />\n        <input type=\"submit\" value={'Send'} />\n      </form>\n    )\n  }\n}\n\nexport default ChatInput","import React, { Component } from 'react'\nimport ChatInput from './ChatInput'\n\nimport io from \"socket.io-client\";\n\nclass Chat extends Component {\n  state = {\n    name: 'Bob',\n    chat: [],\n  }\n\n  ws = io('wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl', {path: \"/flights\"});\n\n  componentDidMount() {\n    this.ws.on(\"CHAT\", (data) => {\n      data.date = new Date(data.date).toLocaleDateString('en-GB')\n      this.setState({\n        chat: [...this.state.chat, data]\n      });\n    });\n\n  }\n  submitMessage = messageString => {\n    // on submitting the ChatInput form, send the message, add it to the list and reset the input\n    this.ws.emit(\"CHAT\", { name: this.state.name, message: messageString })\n  }\n\n  renderChat() {\n    const { chat } = this.state;\n    return chat.map((data, idx) => (\n      <div key={idx}>\n        <span style={{ color: \"green\" }}>{data.name} ({data.date}): </span>\n        <span>{data.message}</span>\n      </div>\n    ));\n  }\n\n  render() {\n    return (\n      <div>\n        <label htmlFor=\"name\">\n          Name:&nbsp;\n          <input\n            type=\"text\"\n            id={'name'}\n            placeholder={'Enter your name...'}\n            value={this.state.name}\n            onChange={e => this.setState({ name: e.target.value })}\n          />\n        </label>\n        <ChatInput\n          onSubmitMessage={messageString => this.submitMessage(messageString)}\n        />\n        <div>{this.renderChat()}</div>\n      </div>\n    )\n  }\n}\n\nexport default Chat\n","import React, { Component } from \"react\";\nimport {\n  Route,\n  NavLink,\n  HashRouter\n} from \"react-router-dom\";\n\nimport Mapa from \"./Mapa\";\nimport FlightInfo from \"./FlightInfo\";\nimport Chat from \"./Chat\";\n \nclass Main extends Component {\n  render() {\n    return (\n    <HashRouter>\n        <div>\n          <h1>FLIGHTS</h1>\n          <ul className=\"header\">\n            <li><NavLink exact to=\"/\">Mapa</NavLink></li>\n            <li><NavLink to=\"/flight_info\">Flight Info</NavLink></li>\n            <li><NavLink to=\"/chat\">Chat</NavLink></li>\n          </ul>\n          <div className=\"content\">\n            <Route exact path=\"/\" component={Mapa}/>\n            <Route path=\"/flight_info\" component={FlightInfo}/>\n            <Route path=\"/chat\" component={Chat}/>\n          </div>\n        </div>\n    </HashRouter>\n    );\n  }\n}\n \nexport default Main;","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Main from \"./Main\";\nimport \"./index.css\";\n \nReactDOM.render(\n  <Main/>, \n  document.getElementById(\"root\")\n);"],"sourceRoot":""}